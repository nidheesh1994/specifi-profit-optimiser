import{B as q,k as S,D as B,x as H,i as I,f as i,o as d,a as C,u as l,g as N,w as V,b as t,h as g,t as M,d as A,j as a,m as p,E as U,F,l as D,J as O}from"./app-Dj3TLwRn.js";import{_ as T}from"./AuthenticatedLayout-DgKuk3T6.js";import"./ApplicationLogo-C6H0jdit.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"py-12"},J={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white p-6 rounded shadow-sm"},K={key:0,class:"mb-4 p-4 bg-green-100 text-green-800 rounded shadow"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={key:0},W=["value"],X={class:"flex items-center space-x-3"},Y={key:0,class:"mt-6 w-4 h-4 bg-green-500 rounded-full inline-block",title:"Connected"},Z={key:1,class:"mt-6 w-4 h-4 bg-red-500 rounded-full inline-block",title:"Connection Failed"},ee={class:"mt-6"},te=["disabled"],ne={__name:"Index",props:{settings:Object},setup(L){var v,f,c,_,x,y,k,w,h;const r=L,b=q(),m=S(null);B(()=>{var u;(u=b.props.flash)!=null&&u.success&&(m.value=b.props.flash.success,setTimeout(()=>{m.value=null},4e3))});const n=S(((v=r.settings)==null?void 0:v.connection_status)||null),s=H({labor_hours:(f=r.settings)==null?void 0:f.labor_hours,labor_cost_per_hour:(c=r.settings)==null?void 0:c.labor_cost_per_hour,fixed_overheads:(_=r.settings)==null?void 0:_.fixed_overheads,target_profit_margin:(x=r.settings)==null?void 0:x.target_profit_margin,llm_provider:(y=r.settings)==null?void 0:y.llm_provider,api_key:(k=r.settings)==null?void 0:k.api_key,model_name:(w=r.settings)==null?void 0:w.model_name,connection_status:(h=r.settings)==null?void 0:h.connection_status}),E=I(()=>s.llm_provider==="openai"?["gpt-4o","gpt-4.1","gpt-4","gpt-3.5-turbo"]:[]),P=async()=>{if(!s.llm_provider||!s.api_key||!s.model_name){n.value="error";return}n.value="checking",O.post(route("settings.test-connection"),{provider:s.llm_provider,api_key:s.api_key,model_name:s.model_name},{preserveState:!0,preserveScroll:!0,only:[],onSuccess:u=>{var e;n.value=((e=u.props.flash)==null?void 0:e.connection_status)??"error",s.connection_status=n.value},onError:()=>{n.value="error"}})};return(u,e)=>(d(),i(F,null,[C(l(N),{title:"Settings"}),C(T,null,{header:V(()=>e[8]||(e[8]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Settings",-1)])),default:V(()=>[t("div",j,[t("div",J,[t("div",$,[m.value?(d(),i("div",K,M(m.value),1)):g("",!0),t("form",{onSubmit:e[7]||(e[7]=A(o=>l(s).post(u.route("settings.update"),{replace:!0}),["prevent"]))},[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold mb-2"},"Labor Settings",-1)),t("div",z,[t("div",null,[e[9]||(e[9]=t("label",{class:"block font-medium mb-1"},"Estimated Labor Hours",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>l(s).labor_hours=o),class:"w-full border px-3 py-2 rounded",step:"0.1",required:""},null,512),[[p,l(s).labor_hours]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block font-medium mb-1"},"Labor Cost Per Hour (£)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=o=>l(s).labor_cost_per_hour=o),class:"w-full border px-3 py-2 rounded",step:"0.01",required:""},null,512),[[p,l(s).labor_cost_per_hour]])])]),e[18]||(e[18]=t("h3",{class:"text-lg font-semibold mt-6 mb-2"},"Financial Settings",-1)),t("div",G,[t("div",null,[e[11]||(e[11]=t("label",{class:"block font-medium mb-1"},"Fixed Overheads (£)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=o=>l(s).fixed_overheads=o),class:"w-full border px-3 py-2 rounded",step:"0.01",required:""},null,512),[[p,l(s).fixed_overheads]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block font-medium mb-1"},"Target Profit Margin (%)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=o=>l(s).target_profit_margin=o),class:"w-full border px-3 py-2 rounded",step:"0.01",required:""},null,512),[[p,l(s).target_profit_margin]])])]),e[19]||(e[19]=t("h3",{class:"text-lg font-semibold mt-6 mb-2"},"AI Configuration",-1)),t("div",Q,[t("div",null,[e[14]||(e[14]=t("label",{class:"block font-medium mb-1"},"LLM Provider",-1)),a(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).llm_provider=o),class:"w-full border px-3 py-2 rounded"},e[13]||(e[13]=[t("option",{value:""},"Select Provider",-1),t("option",{value:"openai"},"OpenAI",-1),t("option",{value:"huggingface",disabled:""},"Hugging Face",-1),t("option",{value:"selfhosted",disabled:""},"Self Hosted",-1)]),512),[[U,l(s).llm_provider]])]),l(s).llm_provider==="openai"?(d(),i("div",R,[e[15]||(e[15]=t("label",{class:"block font-medium mb-1"},"Model Name",-1)),a(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>l(s).model_name=o),class:"w-full border px-3 py-2 rounded"},[(d(!0),i(F,null,D(E.value,o=>(d(),i("option",{key:o,value:o},M(o),9,W))),128))],512),[[U,l(s).model_name]])])):g("",!0),t("div",null,[e[16]||(e[16]=t("label",{class:"block font-medium mb-1"},"API Key",-1)),a(t("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).api_key=o),class:"w-full border px-3 py-2 rounded"},null,512),[[p,l(s).api_key]])]),t("div",X,[t("button",{type:"button",onClick:P,class:"mt-6 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Check Connection "),n.value==="success"?(d(),i("span",Y)):g("",!0),n.value==="error"?(d(),i("span",Z)):g("",!0)])]),t("div",ee,[t("button",{type:"submit",disabled:l(s).processing,class:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Save Settings ",8,te)])],32)])])])]),_:1})],64))}};export{ne as default};
